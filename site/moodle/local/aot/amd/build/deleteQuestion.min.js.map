{"version":3,"sources":["../src/deleteQuestion.js"],"names":["define","$","ModalFactory","String","ModalEvents","Ajax","trigger","create","type","types","SAVE_CANCEL","title","get_string","body","preShowCallback","triggerElement","modal","classString","classList","questionid","substr","lastIndexOf","params","setSaveButtonText","large","done","getRoot","on","save","e","preventDefault","footer","Y","one","setContent","spinner","M","util","add_spinner","show","request","methodname","args","call","data","window","location","reload","log","fail","error"],"mappings":"AAAAA,OAAM,4BAAC,CAAC,QAAD,CAAW,oBAAX,CAAiC,UAAjC,CAA6C,mBAA7C,CACH,WADG,CAAD,CACY,SAASC,CAAT,CAAYC,CAAZ,CAA0BC,CAA1B,CAAkCC,CAAlC,CAA+CC,CAA/C,CAAqD,CACnE,GAAIC,CAAAA,CAAO,CAAGL,CAAC,CAAC,yBAAD,CAAf,CACAC,CAAY,CAACK,MAAb,CAAoB,CAChBC,IAAI,CAAEN,CAAY,CAACO,KAAb,CAAmBC,WADT,CAEhBC,KAAK,CAAER,CAAM,CAACS,UAAP,CAAkB,iBAAlB,CAAqC,WAArC,CAFS,CAGhBC,IAAI,CAAEV,CAAM,CAACS,UAAP,CAAkB,yBAAlB,CAA6C,WAA7C,CAHU,CAIhBE,eAAe,CAAE,yBAASC,CAAT,CAAyBC,CAAzB,CAAgC,CAC7CD,CAAc,CAAGd,CAAC,CAACc,CAAD,CAAlB,CAD6C,GAEzCE,CAAAA,CAAW,CAAGF,CAAc,CAAC,CAAD,CAAd,CAAkBG,SAAlB,CAA4B,CAA5B,CAF2B,CAGzCC,CAAU,CAAGF,CAAW,CAACG,MAAZ,CAAmBH,CAAW,CAACI,WAAZ,CAAwB,UAAxB,GAAnB,CAH4B,CAI7CL,CAAK,CAACM,MAAN,CAAe,CAAC,WAAcH,CAAf,CAAf,CACAH,CAAK,CAACO,iBAAN,CAAwBpB,CAAM,CAACS,UAAP,CAAkB,iBAAlB,CAAqC,WAArC,CAAxB,CACH,CAVe,CAWhBY,KAAK,GAXW,CAApB,CAYGlB,CAZH,EAaKmB,IAbL,CAaU,SAAST,CAAT,CAAgB,CAClBA,CAAK,CAACU,OAAN,GAAgBC,EAAhB,CAAmBvB,CAAW,CAACwB,IAA/B,CAAqC,SAASC,CAAT,CAAY,CAC7CA,CAAC,CAACC,cAAF,GACA,GAAIC,CAAAA,CAAM,CAAGC,CAAC,CAACC,GAAF,CAAM,eAAN,CAAb,CACAF,CAAM,CAACG,UAAP,CAAkB,aAAlB,EACA,GAAIC,CAAAA,CAAO,CAAGC,CAAC,CAACC,IAAF,CAAOC,WAAP,CAAmBN,CAAnB,CAAsBD,CAAtB,CAAd,CACAI,CAAO,CAACI,IAAR,GACA,GAAIC,CAAAA,CAAO,CAAG,CACVC,UAAU,CAAE,2BADF,CAEVC,IAAI,CAAE1B,CAAK,CAACM,MAFF,CAAd,CAIAjB,CAAI,CAACsC,IAAL,CAAU,CAACH,CAAD,CAAV,EAAqB,CAArB,EAAwBf,IAAxB,CAA6B,SAASmB,CAAT,CAAe,CACxC,GAAI,KAAAA,CAAJ,CAAmB,CACfC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,EACH,CAFD,IAEO,CACHf,CAAC,CAACgB,GAAF,CAAM,wBAAN,CACH,CACJ,CAND,EAMGC,IANH,CAMQ,SAAUC,CAAV,CAAiB,CACrBlB,CAAC,CAACgB,GAAF,CAAME,CAAN,EACAlB,CAAC,CAACgB,GAAF,CAAM,QAAN,CACH,CATD,CAUH,CApBD,CAqBH,CAnCL,CAqCH,CAxCK,CAAN","sourcesContent":["define(['jquery', 'core/modal_factory', 'core/str', 'core/modal_events',\n    'core/ajax'], function($, ModalFactory, String, ModalEvents, Ajax) {\n    var trigger = $('.question_delete_button');\n    ModalFactory.create({\n        type: ModalFactory.types.SAVE_CANCEL,\n        title: String.get_string('delete_question', 'local_aot'),\n        body: String.get_string('delete_question_confirm', 'local_aot'),\n        preShowCallback: function(triggerElement, modal) {\n            triggerElement = $(triggerElement);\n            let classString = triggerElement[0].classList[0];\n            let questionid = classString.substr(classString.lastIndexOf('question') + 'question'.length);\n            modal.params = {'questionid': questionid};\n            modal.setSaveButtonText(String.get_string('delete_question', 'local_aot'));\n        },\n        large: true,\n    }, trigger)\n        .done(function(modal) {\n            modal.getRoot().on(ModalEvents.save, function(e) {\n                e.preventDefault();\n                let footer = Y.one('.modal-footer');\n                footer.setContent('Deleting...');\n                let spinner = M.util.add_spinner(Y, footer);\n                spinner.show();\n                let request = {\n                    methodname: 'local_aot_delete_question',\n                    args: modal.params,\n                };\n                Ajax.call([request])[0].done(function(data) {\n                    if (data === true) {\n                        window.location.reload();\n                    } else {\n                        Y.log('delete question failed');\n                    }\n                }).fail(function (error) {\n                    Y.log(error);\n                    Y.log('failed');\n                });\n            });\n        });\n\n});"],"file":"deleteQuestion.min.js"}