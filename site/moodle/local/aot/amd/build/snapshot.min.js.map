{"version":3,"sources":["../src/snapshot.js"],"names":["define","$","Ajax","user_i","classList","user_id","substr","lastIndexOf","draft_context","draft_contextid","real_context","real_contextid","course_name","course_id","user_n","user_name","click","takePhoto","canvas","ctx","getContext","video","drawImage","img_base64","toDataURL","split","call","methodname","args","done","data","Y","log","fail","error"],"mappings":"AAAAA,OAAM,sBAAE,CAAC,QAAD,CAAW,WAAX,CAAF,CAA2B,SAAUC,CAAV,CAAYC,CAAZ,CAAkB,IACvCC,CAAAA,CAAM,CAAGF,CAAC,CAAC,aAAD,CAAD,CAAiB,CAAjB,EAAoBG,SAApB,CAA8B,CAA9B,CAD8B,CAEvCC,CAAO,CAAGF,CAAM,CAACG,MAAP,CAAcH,CAAM,CAACI,WAAP,CAAmB,qBAAnB,IAAd,CAF6B,CAGvCC,CAAa,CAAGP,CAAC,CAAC,aAAD,CAAD,CAAiB,CAAjB,EAAoBG,SAApB,CAA8B,CAA9B,CAHuB,CAIvCK,CAAe,CAAGD,CAAa,CAACF,MAAd,CAAqBE,CAAa,CAACD,WAAd,CAA0B,6BAA1B,IAArB,CAJqB,CAMvCG,CAAY,CAAGT,CAAC,CAAC,aAAD,CAAD,CAAiB,CAAjB,EAAoBG,SAApB,CAA8B,CAA9B,CANwB,CAOvCO,CAAc,CAAGD,CAAY,CAACJ,MAAb,CAAoBI,CAAY,CAACH,WAAb,CAAyB,4BAAzB,IAApB,CAPsB,CASvCK,CAAW,CAAGX,CAAC,CAAC,uBAAD,CAAD,CAA2B,CAA3B,EAA8BG,SAA9B,CAAwC,CAAxC,CATyB,CAUvCS,CAAS,CAAGD,CAAW,CAACN,MAAZ,CAAmBM,CAAW,CAACL,WAAZ,CAAwB,cAAxB,IAAnB,CAV2B,CAWvCO,CAAM,CAAGb,CAAC,CAAC,aAAD,CAAD,CAAiB,CAAjB,EAAoBG,SAApB,CAA8B,CAA9B,CAX8B,CAYvCW,CAAS,CAAGD,CAAM,CAACR,MAAP,CAAcQ,CAAM,CAACP,WAAP,CAAmB,uBAAnB,IAAd,CAZ2B,CAe3CN,CAAC,CAAC,uBAAD,CAAD,CAA2Be,KAA3B,CAAiC,UAAY,CACzCC,CAAS,EACZ,CAFD,EAIJ,QAASA,CAAAA,CAAT,EAAqB,IACTC,CAAAA,CAAM,CAAGjB,CAAC,CAAC,kBAAD,CAAD,CAAsB,CAAtB,CADA,CAETkB,CAAG,CAAGD,CAAM,CAACE,UAAP,CAAkB,IAAlB,CAFG,CAGTC,CAAK,CAAGpB,CAAC,CAAC,mBAAD,CAAD,CAAuB,CAAvB,CAHC,CAIbkB,CAAG,CAACG,SAAJ,CAAcD,CAAd,CAAqB,CAArB,CAAuB,CAAvB,CAAyB,GAAzB,CAA6B,GAA7B,EAJa,GAKTE,CAAAA,CAAU,CAAGL,CAAM,CAACM,SAAP,GAAmBC,KAAnB,CAAyB,GAAzB,EAA8B,CAA9B,CALJ,CAgBbvB,CAAI,CAACwB,IAAL,CAAU,CALI,CACVC,UAAU,CAAC,2BADD,CAEVC,IAAI,CANK,CAAC,QAAUL,CAAX,CAAuB,OAASlB,CAAhC,CAAyC,aAAe,aAAxD,CACT,eAAiBI,CADR,CACyB,cAAgBE,CADzC,CACyD,SAAWE,CADpE,CAET,SAHWE,CAAS,CAAC,GAAV,CAAcF,CAAd,CAAyB,MAC3B,CAIC,CAKJ,CAAV,EAAqB,CAArB,EAAwBgB,IAAxB,CAA6B,SAAUC,CAAV,CAAe,CACxC,GAAG,IAAAA,CAAH,CAAc,CACVC,CAAC,CAACC,GAAF,CAAM,oBAAN,CACH,CAFD,IAEM,CACFD,CAAC,CAACC,GAAF,CAAM,oBAAN,CACH,CACJ,CAND,EAMGC,IANH,CAMQ,SAAUC,CAAV,CAAiB,CACrBH,CAAC,CAACC,GAAF,CAAME,CAAN,EACAH,CAAC,CAACC,GAAF,CAAM,QAAN,CACH,CATD,CAWH,CAER,CAhDK,CAAN","sourcesContent":["define (['jquery', 'core/ajax'], function ($,Ajax) {\n        let user_i = $('.end_button')[0].classList[1];\n        let user_id = user_i.substr(user_i.lastIndexOf('save_record_userid_') + 'save_record_userid_'.length);\n        let draft_context = $('.end_button')[0].classList[3];\n        let draft_contextid = draft_context.substr(draft_context.lastIndexOf('save_record_draftcontextid_'\n        ) + 'save_record_draftcontextid_'.length);\n        let real_context = $('.end_button')[0].classList[4];\n        let real_contextid = real_context.substr(real_context.lastIndexOf('save_record_realcontextid_'\n        ) + 'save_record_realcontextid_'.length);\n        let course_name = $('.next_question_button')[0].classList[2];\n        let course_id = course_name.substr(course_name.lastIndexOf('next_button_') + 'next_button_'.length);\n        let user_n = $('.end_button')[0].classList[5];\n        let user_name = user_n.substr(user_n.lastIndexOf('save_record_username_') + 'save_record_username_'.length);\n\n\n        $('.next_question_button').click(function () {\n            takePhoto();\n        });\n\n    function takePhoto() {\n            let canvas = $('.snapshot_canvas')[0];\n            let ctx = canvas.getContext('2d');\n            var video = $('.video_to_display')[0];\n            ctx.drawImage(video, 0,0,250,200);\n            var img_base64 = canvas.toDataURL().split(',')[1];\n            var filename = user_name+'_'+course_id+ '.jpg';\n            let params = {'imgfile':img_base64, 'userid':user_id, 'fileareaname':'profile_img',\n                'draftcontextid':draft_contextid, 'realcontextid':real_contextid, 'courseid':course_id,\n                'filename':filename};\n\n            let request = {\n                methodname:'local_aot_upload_snapshot',\n                args:params,\n            };\n\n            Ajax.call([request])[0].done(function (data){\n                if(data==true){\n                    Y.log('img success upload');\n                }else {\n                    Y.log('img did not upload');\n                }\n            }).fail(function (error) {\n                Y.log(error);\n                Y.log('failed');\n            });\n\n        }\n\n}\n);"],"file":"snapshot.min.js"}